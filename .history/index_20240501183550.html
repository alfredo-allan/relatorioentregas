<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style/styles.css" />
    <title>Registro De Entregas</title>
  </head>
  <body>
		<div id="menu-options">
        <ul>
          <!-- <img id="usuario" src="./images/usuario-exemplo.jpg" alt="" /> -->
          <a href="./pages/consultar.html"><li>Consultar Entregas</li></a>
          <a href="./pages/editar.html"><li>Editar Entrega</li></a>
          <a href="./pages/apagar.html"><li>Apagar Entrega</li></a>
					<a href="./pages/detalhes.html"><li>Listagem Detalhada</li></a>
           </ul>
      </div>
    </div>
    <header>
      <img id="menu-icon" src="./img/barra-de-menu.png" alt="" />
        <img id="cha" src="./img/marijuana.png" alt="" />
        <img id="po" src="./img/cocaina.png" alt="" />
        <img id="bala" src="./img/mdma.png" alt="" />
        <img id="lsd" src="./img/lsd.png" alt="" />
        <img id="ghb" src="./img/ghb.png" alt="" />
    </header>
    <h1 id="text-top">Registro De Entregas</h1>
    <div id="form">
      <div class="column">
        <span style="display: none">ID:</span>
        <input
          type="text"
          id="id"
          style="display: none"
          placeholder="ID"
          readonly
        />
        <span>Nome Do Motoca</span>
        <input type="text" id="nome-motoca" placeholder="Digite Seu Nome" />

        <span>Endereço Da Entrega</span>
        <input
          type="text"
          id="endereço-entrega"
          placeholder="Digite O Endereço"
        />

        <span>Material</span>
        <input
          type="text"
          id="descricao-produto"
          placeholder="Tipo do Material"
        />

         <span>Pagamamento</span>
        <input id="tipo-pagamento" type="text" id="agamento" placeholder="Informe o Metodo De Pagamento" />
        <span>Data</span>
        <input id="data" type="text">

        <button id="btn-salvar">Salvar</button>
      </div>
    </div>
  </body>
  <script>function formatarData() {
  let inputData = document.getElementById("data").value;

  let dataFormatada = inputData.replace(/^(\d{2})(\d{2})(\d{2})$/, "$1/$2/$3");

  document.getElementById("data").value = dataFormatada;
}
document
      .getElementById("btn-salvar")
      .addEventListener("click", function () {
        gerarProximoId();
        const nomeMotoca = document.getElementById("nome-motoca").value;
        const enderecoEntrega = document.getElementById("endereço-entrega").value;
        const descricaoProduto = document.getElementById("descricao-produto").value;
        const tipoPagamento = document.getElementById("data-vencimento").value;
        const quantidadeProdutos = document.getElementById(
          "quantidade-produtos"
        ).value;

        fetch("https://v1controledatas.pythonanywhere.com/salvar-dados", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            nomeMotoca: nomeMotoca,
            enderecoEntrega: enderecoEntrega,
            enderecoCliente: enderecoCliente,
            ean: ean,
            descricaoProduto: descricaoProduto,
            tipoPagamento: tipoPagamento,
            quantidadeProdutos: quantidadeProdutos,
          }),
        })
          .then((response) => {
            if (response.ok) {
              // Abre o modal ao invés de exibir o alert
              document.getElementById("myModal").style.display = "block";
            } else {
              throw new Error("Erro ao salvar os dados");
            }
          })
          .catch((error) => {
            console.error("Erro ao salvar os dados:", error);
          });
      });
    let proximoId = 1;

    function gerarProximoId() {
      document.getElementById("id").value = proximoId;
      proximoId++;
    }
</script>
	<script src="./script.js"></script>
</html>
